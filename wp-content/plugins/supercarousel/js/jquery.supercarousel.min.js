/*

 * jQuery Super Carousel Plugin v1.0

 * Copyright (C) 2012 Taraprasad Swain

 * Author URL: http://www.taraprasad.com

 * Plugin URL: http://www.taraprasad.com/supercarousel

*/

(function(e){e.fn.supercarousel=function(t){var n=e(this),r,i=false,s=0,o=1,u=0,a=e.fn.supercarousel,f=a.defaults,l=[],c=0,h=0,p=0,d={},v={},g,y=function(){g=e.extend({},f,t);if(!r)return;if(r.width()<=g.mobileWidth){if(g.mobileVisible>0){g.visible=g.mobileVisible}}else if(r.width()<=g.tabletWidth){if(g.tabletVisible>0){g.visible=g.tabletVisible}}},b=function(){n.wrap('<div class="supercarousel_wrapper"></div>').css({display:"block",visibility:"visible"});r=n.parent();if(!r)return;var e=n.html();n.prepend(e);n.append(e);h=n.children().length/3;y();g.onload(n);r.height(800);E();w()},w=function(){if(!r)return;y();M();_();P();D();T();H();N(u);n.stop(true,true)},E=function(){if(g.next!=""){e(g.next).click(function(e){e.preventDefault();if(u<o-1||g.circular){N(u+1)}}).css({display:"block"})}if(g.prev!=""){e(g.prev).click(function(e){e.preventDefault();if(u>0||g.circular){N(u-1)}}).css({display:"block"})}if(g.swipe){r.swipe({swipeLeft:function(e,t,n,r,i){if(u<o-1||g.circular){N(u+1)}},swipeRight:function(e,t,n,r,i){if(u<o-1||g.circular){N(u-1)}},allowPageScroll:"vertical"})}if(g.keys){e("body").keyup(function(e){if(e.keyCode==49){N(0)}else if(e.keyCode==50){N(1)}else if(e.keyCode==51){N(2)}else if(e.keyCode==52){N(3)}else if(e.keyCode==53){N(4)}else if(e.keyCode==54){N(5)}else if(e.keyCode==55){N(6)}else if(e.keyCode==56){N(7)}else if(e.keyCode==57){N(8)}else if(e.keyCode==58){N(9)}else if(e.keyCode==37){N(u-1)}else if(e.keyCode==39){N(u+1)}else if(e.keyCode==38){N(u-1)}else if(e.keyCode==40){N(u+1)}})}if(g.mouseWheel){r.bind("mousewheel",function(e,t){if(t>0){N(u-1)}else{N(u+1)}})}},S=function(){if(!r)return;if(g.auto){setInterval(function(){if(g.pauseOver){if(!r.ismouseover()){x()}}else{x()}},g.pauseTime)}},x=function(){if(g["direction"]=="left"||g["direction"]=="down"){N(u+1)}else if(g["direction"]=="right"||g["direction"]=="up"){N(u-1)}},T=function(){if(g.paging!=""){e(g.paging).html("");for(m=0;m<o;m++){var t=e('<a href="#"><span>'+(m+1)+"</span></a>").click(function(t){t.preventDefault();N(e(this).index())});e(g["paging"]).append(t)}}},N=function(t){if(i)return;if(t>=o&&!g.circular){N(0);return}else if(t<0&&!g.circular){N(o-1);return}if(t==o-1&&!g.circular&&g.next!=""){e(g.next).addClass("disabled")}else if(g.next!=""&&e(g.next).hasClass("disabled")){e(g.next).removeClass("disabled")}if(t==0&&!g.circular&&g.prev!=""){e(g.prev).addClass("disabled")}else if(g.prev!=""&&e(g.prev).hasClass("disabled")){e(g.prev).removeClass("disabled")}if(g.paging!=""){if(e(g.paging).find(">a:eq("+t+")").length>0){e(g.paging).find(">a").removeClass("selected");e(g.paging).find(">a:eq("+t+")").addClass("selected")}}u=t;if(g["effect"]=="slide"){if(g["direction"]=="left"||g["direction"]=="right"){O()}else if(g["direction"]=="up"||g["direction"]=="down"){A()}}else if(g["effect"]=="fade"){L()}},C=function(e){var t;if(!r)return 0;if(g.step>0){var i=e*g.step+h;t=n.find(">div:eq("+i+")").position().left}else{t=e*r.outerWidth();t+=p}if(!g.circular){var s=-2*p+r.outerWidth();if(-t<s){t=-s}}var s=-2*p;var a=-1*p+r.outerWidth();if(-t<=s){t=-s;u=0}else if(-t>=a&&u<0){t=-a;u=o-1}return t},L=function(){var e=C(u);i=true;var t=n.clone().css({position:"absolute",display:"none",zIndex:0,left:-e,top:n.position().top}).appendTo(r);t.fadeIn(g["easingTime"],g["easing"],function(){n.css({left:-e});t.remove();i=false;var s=-2*p;var o=-1*p+r.outerWidth();if(-e<=s){n.css({left:-e+p})}else if(-e>=o){n.css({left:-e-p})}})},A=function(){var e=C(u);i=true;if(g["direction"]=="up"){if(-e<n.position().left){var t=1}else{var t=-1}}else if(g["direction"]=="down"){if(-e<n.position().left){var t=-1}else{var t=1}}var s=n.clone().css({position:"absolute",zIndex:0,left:-e,top:n.position().top+r.outerHeight(true)*t}).appendTo(r);s.stop(true,true).animate({top:n.position().top},g["easingTime"],g["easing"],function(){n.css({left:-e});s.remove();i=false;var t=-2*p;var o=-1*p+r.outerWidth();if(-e<=t){n.css({left:-e+p})}else if(-e>=o){n.css({left:-e-p})}})},O=function(){var e=C(u);i=true;n.stop(true,true).animate({left:-e},g["easingTime"],g["easing"],function(){i=false;var t=-2*p;var s=-1*p+r.outerWidth();if(-e<=t){n.css({left:-e+p})}else if(-e>=s){n.css({left:-e-p})}});H()},M=function(){if(g.step>h){g.step=h}if(g["visible"]){if(g.step>g.visible||g.step==0){g.step=g.visible}}},_=function(){if(g["visible"]){d={width:F(),height:"auto"};v={width:"100%",height:"auto"}}else if(g["itemWidth"]!=""){d={width:g["itemWidth"],height:"auto"};v={width:"100%",height:"auto"}}else if(g["itemHeight"]!=""){d={width:"auto",height:g["itemHeight"]};v={width:"auto",height:"100%"}}n.find(">div").css(d);B()},D=function(){$t=n.find(">div:last");p=($t.position().left+$t.outerWidth())/3;if(!r)return 0;if(g.step>0){if(g.visible&&g.visible==1){o=h;return}o=1;var e=C(o-1)*-1;var t=-2*p+r.outerWidth();while(e>t){o++;e=C(o-1)*-1}return;o=Math.ceil(h/g.step);var e=C(o-1)*-1;var t=-2*p+r.outerWidth();while(e<t){o--;e=C(o-1)*-1}var i=(o-1)*g.step+h;$w=n.find(">div:eq("+i+")").width();alert(e-t+" = "+$w);if(e>t&&e-t>=$w){o++}}else{o=Math.ceil(p/r.outerWidth())}},P=function(){n.find(">div").each(function(){$ele=e(this);if(g.itemHeight!=""&&g.type=="image"){$ele.width($ele.find(".imgslide").width())}if($ele.prev().length){$ele.css({left:$ele.prev().position().left+$ele.prev().outerWidth()+g.slideGap})}else{$ele.css({left:0})}})},H=function(){if(g.autoHeight){if(g.step>0){var e=u*g.step+h;var t=n.find(">div:eq("+e+")").height();r.stop(true,true).animate({height:t},700,"swing",function(){});return}}var i=0;for(k=0;k<h;k++){e=n.children(":eq("+k+")");if(e.outerHeight()>i){i=e.outerHeight()}}if(!r)return;r.height(i)},B=function(){if(g.type=="image"){n.find("img").css(v)}},j=function(){if(g["visible"]){return g["visible"]}else if(g["itemWidth"]!=""){return Math.ceil(r.width()/g["itemWidth"])}return 0},F=function(){if(!r)return 0;return Math.ceil((r.width()-(g.visible-1)*g.slideGap)/g.visible)},I=function(){};e(window).resize(function(){w()});n.watch("display",function(){w()});n.imagesLoaded(function(){b();S()})};var t=e.fn.supercarousel;t.defaults={direction:"left",effect:"slide",itemWidth:"",itemHeight:"",slideGap:5,mobileVisible:1,tabletVisible:2,mobileWidth:480,tabletWidth:768,step:1,type:"content",auto:false,autoHeight:false,easing:"swing",easingTime:700,pauseTime:1e3,pauseOver:true,next:"",prev:"",paging:"",circular:false,mouseWheel:false,swipe:false,keys:false,onload:function(e){}}})(jQuery);jQuery.expr[":"].hiddenByParent=function(e){return jQuery(e).parents("*:not(:visible)").length}